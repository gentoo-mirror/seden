From e1a54c79137d30b332abb645f05759900844b68a Mon Sep 17 00:00:00 2001
From: niparx <koliap@gmail.com>
Date: Fri, 5 Jan 2018 15:48:31 +0200
Subject: [PATCH] [OGRE-592] RTShaderSystem compile error when using double
 precision (#622)

RTShaderSystem: compile error when using double precision

https://ogre3d.atlassian.net/browse/OGRE-592
---
 Components/RTShaderSystem/src/OgreShaderFFPTexturing.cpp | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/Components/RTShaderSystem/src/OgreShaderFFPTexturing.cpp b/Components/RTShaderSystem/src/OgreShaderFFPTexturing.cpp
index 2093b4da38..558be4ceea 100644
--- a/Components/RTShaderSystem/src/OgreShaderFFPTexturing.cpp
+++ b/Components/RTShaderSystem/src/OgreShaderFFPTexturing.cpp
@@ -654,8 +654,12 @@ void FFPTexturing::addPSArgumentInvocations(Function* psMain,
             curFuncInvocation->pushOperand(ParameterFactory::createConstParam(Vector4(alphaValue)), Operand::OPS_IN);
         }
         else
-        {               
-            curFuncInvocation->pushOperand(ParameterFactory::createConstParam(Vector4(colourValue.ptr())), Operand::OPS_IN);
+        {
+            curFuncInvocation->pushOperand(ParameterFactory::createConstParam(Vector4((Real)colourValue.r,
+                                                                                      (Real)colourValue.g,
+                                                                                      (Real)colourValue.b,
+                                                                                      (Real)colourValue.a)),
+                                           Operand::OPS_IN);
         }
         
         curFuncInvocation->pushOperand(arg, Operand::OPS_OUT);
